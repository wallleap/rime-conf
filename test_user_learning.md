# 用户习惯学习机制验证指南

## 验证步骤

### 1. 配置文件验证 ✅
- [x] `user_history.txt` 已创建
- [x] `lua/user_learning.lua` 已创建  
- [x] `double_pinyin_flypy.schema.yaml` 已添加 user_history 翻译器
- [x] `Rime.lua` 已加载 user_learning 模块
- [x] `default.custom.yaml` 已启用用户词典功能

### 2. 重新部署验证
```bash
# 重新部署 Rime 配置
# 在输入法中点击重新部署，或使用快捷键
```

### 3. 功能测试方法

#### 测试1: 基础输入验证
1. 输入 "nihao" 查看是否有 "你好" 候选词
2. 多次选择 "你好"，观察其位置是否逐渐提前

#### 测试2: 新词学习验证  
1. 输入一个不常用的词汇，如 "测试学习"
2. 重复输入并选择该词汇3-5次
3. 观察该词汇在候选词中的位置变化

#### 测试3: 历史记录验证
```bash
# 检查是否生成了用户数据库
ls -la *.userdb/

# 查看用户历史文件内容
cat user_history.txt
```

### 4. 预期效果
- 常用词汇会逐渐排在候选词前面
- 新输入的词汇会被记录到历史中
- 候选词排序会根据使用频率动态调整

### 5. 故障排除
如果学习机制未生效：
1. 确认已重新部署配置
2. 检查 Lua 脚本语法是否正确
3. 查看 Rime 日志是否有错误信息
4. 确认用户词典权限设置正确

### 6. 进阶验证
```bash
# 检查 Lua 模块加载
grep "user_learning" Rime.lua

# 验证配置语法
plutil -lint *.yaml
```